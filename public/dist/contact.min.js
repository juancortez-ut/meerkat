$(document).ready(function(){function e(e){e==-1?$("#submit-button").text("Failed").css({background:"#D8000C"}):1==e&&$("#submit-button").text("Success").css({background:"green"}),setTimeout(function(){$("#submit-button").text("Send it").css({background:"#0137A2"})},2500)}Chat.initialize(),$("#chat").submit(function(e){return Chat.sendMessage(e),!1}),$("#chat-header i").click(function(){$(".content-container").toggle(),$(this).hasClass("fa-angle-double-up")?($("#chat-container").css({height:"368px"}),$(this).removeClass("fa-angle-double-up").addClass("fa-angle-double-down")):($("#chat-container").css({height:"30px"}),$(this).removeClass("fa-angle-double-down").addClass("fa-angle-double-up"))}),$("#chat-header i").click(),$("#email").submit(function(t){return $.ajax({type:"POST",url:"/communication/contact",data:{name:t.target.name.value,email:t.target.email.value,phone:t.target.phone.value,category:t.target.category.value,message:t.target.message.value}}).done(function(t){console.log("Success!"),e(1)}).fail(function(t){console.error("Unsuccessful. Error Code:"),console.log(JSON.stringify(t,null,4)),e(-1)}),!1})});var Chat=function(){function e(e){return e.charAt(0).toUpperCase()+e.slice(1)}function t(){var e=new Date,t=e.getTime()+6e4*e.getTimezoneOffset(),n=new Date(t+-18e6);return n.toLocaleTimeString()}var n,a,s={},o=0;return s.initialize=function(){n=io(),this.activateSockets()},s.activateSockets=function(){n.on("chat message",function(e){$("#chat-content").append("<div class='msgln'> <span class='bold'>"+e.name+" ("+e.time+"): </span>"+e.message+"</div>"),$("#chat-content").scrollTop($("#chat-content")[0].scrollHeight)}),n.on("usersOnline",function(e){o=e,console.log("There "+(o>1?"are "+o+" users":"is one user")+" online, including yourself.")}),n.on("new-user",function(e){e!=a&&void 0!==a&&(console.log(e+" joined the chat!"),$("#chat-content").append("<div class='msgln new-user'>"+e+" just joined the chat!</div>"))})},s.getSocket=function(){return n?n:(console.error("Socket has not yet been initialized"),null)},s.sendMessage=function(s){if(!a)return a=$("#chat-message").val(),$("#chat-message").val(""),$("p#name-prompt").remove(),a=e(a),n.emit("joined-chat",a),void $("#chat-content").append("<div class='msgln italic'> Welcome "+a+"! There "+(o>1?"are "+o+" users":" is one user")+" online, including yourself.</div>");var c={message:$("#chat-message").val(),name:a,time:t()};return n?n.emit("chat message",c):(console.error("socket.io not connected. Make sure to initialize socket.io!"),$("#chat-content").append("<span class='error'>Sorry, unable to send messages at the time.</span></br>")),$("#chat-message").val(""),!1},s}();