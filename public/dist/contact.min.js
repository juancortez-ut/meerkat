$(document).ready(function(){function e(){var e=new Date,t=e.getTime()+6e4*e.getTimezoneOffset(),n=new Date(t+-18e6);return n.toLocaleTimeString()}function t(e){e==-1?$("#submit-button").text("Failed").css({background:"#D8000C"}):1==e&&$("#submit-button").text("Success").css({background:"green"}),setTimeout(function(){$("#submit-button").text("Send it").css({background:"#0137A2"})},2500)}var n,a=io(),s=0;$("#chat").submit(function(t){if(void 0===n)return n=$("#chat-message").val(),$("#chat-message").val(""),$("p#name-prompt").remove(),n=n.capitalizeFirstLetter(),a.emit("joined-chat",n),$("#chat-content").append("<div class='msgln italic'> Welcome "+n+"! There are "+s+" users online, including yourself.</div>"),!1;var o={message:$("#chat-message").val(),name:n,time:e()};return a.emit("chat message",o),$("#chat-message").val(""),!1}),a.on("chat message",function(e){$("#chat-content").append("<div class='msgln'> <span class='bold'>"+e.name+" ("+e.time+"): </span>"+e.message+"</div>"),$("#chat-content").scrollTop($("#chat-content")[0].scrollHeight)}),a.on("usersOnline",function(e){s=e,console.log("There are "+e+" users online.")}),a.on("new-user",function(e){e!=n&&void 0!==n&&(console.log(e+" joined the chat!"),$("#chat-content").append("<div class='msgln new-user'>"+e+" just joined the chat!</div>"))}),$("#chat-header i").click(function(){$(".content-container").toggle(),$(this).hasClass("fa-angle-double-up")?($("#chat-container").css({height:"368px"}),$(this).removeClass("fa-angle-double-up").addClass("fa-angle-double-down")):($("#chat-container").css({height:"30px"}),$(this).removeClass("fa-angle-double-down").addClass("fa-angle-double-up"))}),$("#chat-header i").click(),$("#email").submit(function(e){return $.ajax({type:"POST",url:"/communication/contact",data:{name:e.target.name.value,email:e.target.email.value,phone:e.target.phone.value,category:e.target.category.value,message:e.target.message.value}}).done(function(e){console.log("Success!"),t(1)}).fail(function(e){console.error("Unsuccessful. Error Code:"),console.log(JSON.stringify(e,null,4)),t(-1)}),!1}),String.prototype.capitalizeFirstLetter=function(){return this.charAt(0).toUpperCase()+this.slice(1)}});