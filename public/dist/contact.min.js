$(document).ready(function(){function e(){var e=new Date,t=e.getTime()+6e4*e.getTimezoneOffset(),a=new Date(t+-18e6);return a.toLocaleTimeString()}function t(e,t){-1==e?($(".status").css({color:"#F44336"}),$(".status").text(t),$(".status").fadeIn(400).delay(2500).fadeOut(400)):1==e&&($(".status").css({color:"#4CAF50"}),$(".status").text(t),$(".status").fadeIn(400).delay(2500).fadeOut(400))}var a,s=io(),n=0;$("#chat").submit(function(t){if(void 0===a)return a=$("#chat-message").val(),$("#chat-message").val(""),$("p#name-prompt").remove(),a=a.capitalizeFirstLetter(),s.emit("joined-chat",a),$("#chat-content").append("<div class='msgln italic'> Welcome "+a+"! There are "+n+" users online, including yourself.</div>"),!1;var o={message:$("#chat-message").val(),name:a,time:e()};return s.emit("chat message",o),$("#chat-message").val(""),!1}),s.on("chat message",function(e){$("#chat-content").append("<div class='msgln'> <span class='bold'>"+e.name+" ("+e.time+"): </span>"+e.message+"</div>"),$("#chat-content").scrollTop($("#chat-content")[0].scrollHeight)}),s.on("usersOnline",function(e){n=e,console.log("There are "+e+" users online.")}),s.on("new-user",function(e){e!=a&&void 0!==a&&(console.log(e+" joined the chat!"),$("#chat-content").append("<div class='msgln new-user'>"+e+" just joined the chat!</div>"))}),$("#chat-header i").click(function(){$(".content-container").toggle(),$(this).hasClass("fa-angle-double-up")?($("#chat-container").css({height:"368px"}),$(this).removeClass("fa-angle-double-up").addClass("fa-angle-double-down")):($("#chat-container").css({height:"30px"}),$(this).removeClass("fa-angle-double-down").addClass("fa-angle-double-up"))}),$("#email").submit(function(e){return $.ajax({type:"POST",url:"/contact",data:{name:e.target.name.value,email:e.target.email.value,phone:e.target.phone.value,category:e.target.category.value,message:e.target.message.value}}).done(function(e){console.log("Success!"),t(1,"E-mail successful sent!")}).fail(function(e){console.error("Unsuccessful. Error Code: "+e),t(-1,"E-mail unsuccessful sent. Please try again.")}),!1}),String.prototype.capitalizeFirstLetter=function(){return this.charAt(0).toUpperCase()+this.slice(1)}});