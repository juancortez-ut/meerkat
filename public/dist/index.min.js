$(document).ready(function(){function e(e){var t=/(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/;return t.test(e)}function t(){$("#title").empty(),$("#description").empty(),r>c&&($($("ol li")[c]).addClass("active"),$("#title").append(a.newsletter[c].title),$("#description").append("<span class = 'bold'> Description: </span>"+a.newsletter[c].description),$("#image-newsletter").attr("src","../assets/newsletter/newsletter"+c+"?v="+n),$("#image-newsletter").parent()[0].setAttribute("href",a.newsletter[c].image_link),a.newsletter[c].image_link?$("#image-newsletter").parent()[0].setAttribute("onclick","return true;"):$("#image-newsletter").parent()[0].setAttribute("onclick","return false;"))}var n,a,i,o=io(),c=0,r=0,l=0,s=0;o.emit("revision","Get revision number from backend."),o.on("revision",function(e){n=e});var d=setInterval(function(e){$("#next-newsletter").click()},5e3);"/"==window.location.pathname&&(ajaxUtils.getNewsletterData(n,function(e,t){return t?void console.error(t):(a=e.newsletterData,void(r=e.populatedItems))}),ajaxUtils.getCalendarData(function(e,t){return t?void console.error(t):(i=e.calendarData,void(l=e.numCalendarItems))}),ajaxUtils.getAnnouncements(function(e){e&&console.error(e)}),ajaxUtils.getOfficers(function(e){e&&console.error(e)}),ajaxUtils.getAuthentication(function(e){e&&console.error(e)})),ajaxUtils.postAnnouncement(function(e){e&&console.error(e)}),$("#login-form").submit(function(e){return ajaxUtils.login(e,function(e){e&&console.error(e)}),!1}),$(".fa-envelope").click(function(){$("#subscribe-container").css({display:"flex"}),$("#newsletter-buttons").hide(),$(".fa-archive").hide(),$(this).hide(),clearInterval(d)}),$(".fa-envelope-o").click(function(t){var n=$("#subscribe-email").val();e(n)?($("#stat").css({color:"green"}),$("#stat").text("Subscription successful!"),$.ajax({type:"POST",url:"/contact",data:{name:"new user",email:n,phone:"n/a",category:"SHPE Austin: Newletter Subscription Request",message:"Please add "+n+" to the newsletter."}}).done(function(e){console.log("Success!")}).fail(function(e){console.error("Unsuccessful. Error Code: "+e)}),setTimeout(function(){$("#subscribe-container").css({display:"none"}),$("#newsletter-buttons").show(),$(".fa-archive").show(),$(".fa-envelope").show(),$("#stat").text("Subscribe to our newsletter!"),$("#stat").css({color:"black"})},2500)):($("#stat").css({color:"red"}),$("#stat").text("Invalid e-mail."))}),$(".cal-button").on("click",function(e){$(e.currentTarget).hasClass("fa-angle-double-right")?s=(s+1)%l:(s--,0>s&&(s=l-1)),$(".fa-calendar").toggleClass("dark-shpe-blue mid-blue"),calendarHtml=i.calendar[s],$("#event-title").html("<b>Event: </b>"+calendarHtml.event),$("span.title").text(calendarHtml.event);var t,n=ajaxUtils._parseCalendarTime(calendarHtml.time);n.startTime?($("#event-date").html("<b>Date: </b>"+n.month+" "+n.day+", "+n.year+" at "+n.startTime),t=ajaxUtils._convertToDateFormat(n.month,n.day,n.year,n.startTime),$("span.start").text(t),$("span.end").text(t)):($("#event-date").html("<b>Date: </b>"+n.month+" "+n.day+", "+n.year),t=ajaxUtils._convertToDateFormat(n.month,n.day,n.year,n.startTime,""),$("span.start").text(t),$("span.end").text(t)),calendarHtml.location?($("#event-location").html("<b>Location: </b>"+calendarHtml.location),$("span.location").text(calendarHtml.location)):($("#event-location").html(""),$("span.location").text("")),$("#event-link").attr("href",calendarHtml.link),$("span.description").text(calendarHtml.link)}),$("#prev-newsletter").click(function(e){e.originalEvent&&clearInterval(d),$($("ol li")[c]).removeClass("active"),0===c?c=r-1:c--,t()}),$("#next-newsletter").click(function(e){e.originalEvent&&clearInterval(d),$($("ol li")[c]).removeClass("active"),c=(c+1)%r,t()}),$("#close-subscribe").click(function(){$("#subscribe-container").css({display:"none"}),$("#newsletter-buttons").show(),$(".fa-archive").show(),$(".fa-envelope").show(),$("#stat").text("Subscribe to our newsletter!"),$("#stat").css({color:"black"})});var u=/Android|iPhone|iPad|iPod/i.test(navigator.userAgent);u&&$(".show-login").empty(),Number.prototype.pad=function(e){return new Array(e).join("0").slice(-1*(e||2))+this}});var modal=function(){var e={},t=$('<div id="overlay"></div>');return $modal=$('<div id="modal"></div>'),$content=$('<div id="modal-content"></div>'),$close=$('<a id="close" href="#">close</a>'),$modal.hide(),t.hide(),$modal.append($content,$close),e.center=function(){var e,t;e=Math.max($(window).height()-$modal.outerHeight(),0)/2,t=Math.max($(window).width()-$modal.outerWidth(),0)/2,$modal.css({top:e+$(window).scrollTop(),left:t+$(window).scrollLeft()})},e.open=function(n){$content.empty().append(n.content),$modal.css({width:n.width-10||"auto",height:n.height-10||"auto","text-align":n.align}),$content.css({width:n.width||"auto",height:n.height||"auto"}),e.center(),$(window).bind("resize.modal",e.center),$modal.show(),t.show()},e.close=function(){$modal.hide(),t.hide(),$content.empty(),$(window).unbind("resize.modal")},$(document).ready(function(){$(".main-page-container").append(t,$modal),$close.click(function(t){t.preventDefault(),e.close()}),$(".fa-archive").click(function(){var e=400,t=500;window_height=$(window).height(),window_width=$(window).width(),e=window_height<e?window_height-50:e,t=window_width<t?window_width-50:t,$("#modal").css({background:"white"});var n="<h1>View Previous Newsletters<h1> <ul class='newsletterList'> <li><a href='http://us1.campaign-archive2.com/?u=c8b5a41c875ce918bbd091e52&id=215199c3b2&e=38ee20bb08'>June 2016</a> </li><li><a href='http://us1.campaign-archive1.com/?u=c8b5a41c875ce918bbd091e52&id=00399bbff9&e=38ee20bb08'>May 2016</a> </li><li><a href='http://us1.campaign-archive2.com/?u=c8b5a41c875ce918bbd091e52&id=480dcd7865&e=38ee20bb08'>Mid-April 2016</a> </li><li><a href='http://us1.campaign-archive2.com/?u=c8b5a41c875ce918bbd091e52&id=17cac73925&e=38ee20bb08'>Early-April 2016</a></li><li><a href='http://us1.campaign-archive2.com/?u=c8b5a41c875ce918bbd091e52&id=a8f7a3cd22&e=38ee20bb08'>March 2016 </a></li><li><a href='http://us1.campaign-archive2.com/?u=c8b5a41c875ce918bbd091e52&id=ecb6bb1b8c&e=1365fed48c'>February 2016</a></li></ul>";modal.open({content:$(n),width:t+"px",height:e+"px",align:"center"})}),$(document).keydown(function(e){27==e.keyCode&&$("#close").click()})}),e}();