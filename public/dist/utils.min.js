"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Calendar=function(){function e(e,a){s=a,o=$(e||"#cal"),c=o.find("#label"),o.find("#prev").bind("click.calendar",function(){t(!1),d--,0>d&&(d=11),n()}),o.find("#next").bind("click.calendar",function(){t(!0),d=(d+1)%12,n()}),c.bind("click",function(){t(null,(new Date).getMonth(),(new Date).getFullYear())}),c.click(),n()}function t(e,t,n){var a,r=c.text().trim().split(" "),s=parseInt(r[1],10);t=t||(e?"December"===r[0]?0:l.indexOf(r[0])+1:"January"===r[0]?11:l.indexOf(r[0])-1),n=n||(e&&0===t?s+1:e||11!==t?s:s-1),a=i(n,t),$("#cal-frame",o).find(".curr").removeClass("curr").addClass("temp").end().prepend(a.calendar()).find(".temp").fadeOut("slow",function(){$(this).remove()}),$("#label").text(a.label)}function n(){for(var e=s.length||0,t=0;e>t;t++){var n=s[t],i=a(n.time);if(r(d+1)==i.month){var o=i.day;o=parseInt(o.replace(/^0+/,""));var c=$('td:contains("'+o+'")')[0];o==u.getDate()&&$(c).removeClass("today"),$(c).addClass("forest-green"),c.setAttribute("data-date",i.month+" "+o+" "+i.year),c.setAttribute("data-event",n.event),n.location&&c.setAttribute("data-location",n.location),c.setAttribute("data-link",n.link),$(c).css({cursor:"pointer"})}}}function a(e){var t=[],n=e.substring(0,e.indexOf("-"));e=e.substring(e.indexOf("-")+1,e.length);var a=e.substring(0,e.indexOf("-"));a=r(a),e=e.substring(e.indexOf("-")+1,e.length);var i=e.substring(0,2);if(e.length>2){var o=e.substring(3,e.length),c=o.substring(0,5),s=parseInt(c.replace(/^0+/,""));if(s>=12){if(s>12){var l=c.substring(2,c.length),u=parseInt(c.substring(0,2))-12;c=u+l}s="P.M."}else s="A.M.";c=c.replace(/^0+/,""),t.startTime=c+" "+s}else t.startTime="";return t.month=a,t.day=i,t.year=n,t}function r(e){switch(e.length>1&&(e=parseInt(e.replace(/^0+/,""))),e){case 1:return"January";case 2:return"February";case 3:return"March";case 4:return"April";case 5:return"May";case 6:return"June";case 7:return"July";case 8:return"August";case 9:return"September";case 10:return"October";case 11:return"November";case 12:return"December";default:return"Invalid Month"}}function i(e,t){var n,a,r=1,o=!0,c=new Date(e,t,r).getDay(),s=[31,e%4===0&&e%100!==0||e%400===0?29:28,31,30,31,30,31,31,30,31,30,31],u=[];if(i.cache[e]){if(i.cache[e][t])return i.cache[e][t]}else i.cache[e]={};for(n=0;o;){for(u[n]=[],a=0;7>a;a++)0===n?a===c&&(u[n][a]=r++,c++):r<=s[t]?u[n][a]=r++:(u[n][a]="",o=!1),r>s[t]&&(o=!1);n++}if(u[5]){for(n=0;n<u[5].length;n++)""!==u[5][n]&&(u[4][n]="<span>"+u[4][n]+"</span><span>"+u[5][n]+"</span>");u=u.slice(0,5)}for(n=0;n<u.length;n++)u[n]="<tr><td>"+u[n].join("</td><td>")+"</td></tr>";return u=$("<table>"+u.join("")+"</table>").addClass("curr"),$("td:empty",u).addClass("nil"),t===(new Date).getMonth()&&$("td",u).filter(function(){return $(this).text()===(new Date).getDate().toString()}).addClass("today"),i.cache[e][t]={calendar:function(){return u.clone()},label:l[t]+" "+e},i.cache[e][t]}console.log("Initiazing calendar...");var o,c,s,l=["January","February","March","April","May","June","July","August","September","October","November","December"],u=new Date,d=u.getMonth();return $(".glyphicon-remove-sign").click(function(){$("#cal-info").hide()}),$("#cal").click(function(e){if(e.originalEvent&&"forest-green"==e.toElement.classList[0]){if("glyphicon"==e.toElement.classList[0])return;var t=$(e.toElement).attr("data-event"),n=$(e.toElement).attr("data-location");if("undefined"!==("undefined"==typeof t?"undefined":_typeof(t))&&t!==!1){var a=$(e.toElement).attr("data-event");$("#event").text(a);var r=$(e.toElement).attr("data-date");$("#date").text(r),"undefined"!==("undefined"==typeof n?"undefined":_typeof(n))&&n!==!1?($(".locationWrapper").css({display:"block"}),$("#location").text(n)):$(".locationWrapper").css({display:"none"});var i=document.createElement("a");i.href=$(e.toElement).attr("data-link"),$("#calLink").wrap(i)}$("#cal-info").show()}}),i.cache={},{init:e,switchMonth:t,createCal:i}},Chat=function(){function e(e){return e.charAt(0).toUpperCase()+e.slice(1)}function t(){var e=new Date,t=e.getTime()+6e4*e.getTimezoneOffset(),n=new Date(t+-18e6);return n.toLocaleTimeString()}var n,a,r={},i=0;return r.initialize=function(){console.log("Chat initialized!"),n=io(),this.activateSockets()},r.activateSockets=function(){n.on("chat message",function(e){$("#chat-content").append("<div class='msgln'> <span class='bold'>"+e.name+" ("+e.time+"): </span>"+e.message+"</div>"),$("#chat-content").scrollTop($("#chat-content")[0].scrollHeight)}),n.on("usersOnline",function(e){i=e,console.log("There "+(i>1?"are "+i+" users":"is one user")+" online, including yourself.")}),n.on("new-user",function(e){e!=a&&void 0!==a&&(console.log(e+" joined the chat!"),$("#chat-content").append("<div class='msgln new-user'>"+e+" just joined the chat!</div>"))})},r.getSocket=function(){return n?n:(console.error("Socket has not yet been initialized"),null)},r.sendMessage=function(r){if(!a)return a=$("#chat-message").val(),$("#chat-message").val(""),$("p#name-prompt").remove(),a=e(a),n.emit("joined-chat",a),void $("#chat-content").append("<div class='msgln italic'> Welcome "+a+"! There "+(i>1?"are "+i+" users":" is one user")+" online, including yourself.</div>");var o={message:$("#chat-message").val(),name:a,time:t()};return n?n.emit("chat message",o):(console.error("socket.io not connected. Make sure to initialize socket.io!"),$("#chat-content").append("<span class='error'>Sorry, unable to send messages at the time.</span></br>")),$("#chat-message").val(""),!1},r}();