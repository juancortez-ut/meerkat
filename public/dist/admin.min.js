$(document).ready(function(){function e(e){var t="_hiddenCopyText_",o=document.createElement("textarea");o.style.position="absolute",o.style.left="-9999px",o.style.top="1200px",o.id=t,document.body.appendChild(o),o.textContent=e.textContent;var n=document.activeElement;o.focus(),o.setSelectionRange(0,o.value.length);var a;try{a=document.execCommand("copy")}catch(c){a=!1}return n&&"function"==typeof n.focus&&n.focus(),o.textContent="",a}function t(){$.ajax({method:"GET",url:o}).done(function(e){if("object"!=typeof e)return void callback("GET method for "+o+" failed. Unsupported return type.");for(var t=0,n=e.length;t<n;t++)$("select").append('<option value="'+e[t].name+'">'+e[t].name+"</option>")}).fail(function(e){callback("GET method for "+o+" failed.")})}$("#data-newsletterdata").attr("disabled",!0),$(".submit-request").click(function(e){function t(e,t){return console.log("Request complete"),$(c).html(),e?$(c).text("Failure").css({background:"#D8000C"}):$(c).text("Success!").css({background:"green"}),setTimeout(function(){$(c).text("Submit").css({background:"#0137A2"})},2e3),t&&location.reload(),!1}function o(e){for(var t=document.getElementsByName(e),o=0;o<t.length;o++)if(t[o].checked)return t[o].value}var n=e&&e.target&&e.target.form&&e.target.form.children||null,a=$(this).attr("data-request"),c=this,r=[];if(n&&n.length>1){var s=$.map(n,function(e,t){if($(e).is(".form-check"))return[e]});s.filter(function(e){return!!$(e).find(".form-check-input").is(":checked")&&(r.push($(e).find(".form-check-input").val()),!0)})}var i=0;if(r.length>0&&"delete"==a&&($(this).html('<i class="fa fa-cog fa-spin fa-3x fa-fw"></i>'),r.forEach(function(e){$.ajax({method:"DELETE",url:"/data/"+e}).done(function(t){"OK"===t&&console.log(e+" was successfully cleared!")}).fail(function(t){console.error(e+" was unsuccessfully cleared."),console.error(t)}).always(function(){i++,i==r.length&&t(!1,!0)})})),"new-job"==a){var l=(new Date).getTime();console.log(e);var u=e.target.form.position.value,f=e.target.form.company.value,d=e.target.form.description.value,p=e.target.form.url.value,m=e.target.form.poster.value;return $(this).html('<i class="fa fa-cog fa-spin fa-3x fa-fw"></i>'),$.ajax({type:"POST",url:"/update/jobs",data:{position:u,company:f,description:d,url:p,poster:m,ts:l}}).done(function(e){t(!1,!1),console.log("Job was successfully posted!")}).fail(function(e){return 200===e.status?void t(!1,!1):(t(!0,!1),console.error("Job was not posted. :("),void console.error(e))}),!1}if("new-announcement"==a){var h=new Date,g=e.target.form.officer.value,y=e.target.form.announcement.value;return $(this).html('<i class="fa fa-cog fa-spin fa-3x fa-fw"></i>'),$.ajax({type:"POST",url:"/update/announcements",data:{officer:g,timestamp:h,announcement:y}}).done(function(e){t(!1,!1),console.log("Announcement was successfully posted!")}).fail(function(e){return 200===e.status?void t(!1,!1):(t(!0,!1),console.error("Announcement was not posted. :("),void console.error(e))}),!1}if("update"==a){$(this).html('<i class="fa fa-cog fa-spin fa-3x fa-fw"></i>');var v,w=o("updateoptions"),x=$("#data-update").val(),b=!1;try{var E=JSON.parse(x);v=typeof E}catch(T){b=!0}x=b&&"object"!==v?null:x,$.ajax({method:"PUT",url:"/data/"+w,dataType:"json",contentType:"application/json",data:x}).done(function(e){console.log(e),"OK"===e&&(t(!1,!1),console.log(w+" was successfully updated!"))}).fail(function(e){return 200===e.status?void t(!1,!1):(t(!0,!1),console.error(w+" was unsuccessfully updated."),void console.error(e))}).always(function(){})}if("view"==a){$(this).html('<i class="fa fa-cog fa-spin fa-3x fa-fw"></i>');var j=o("keyoptions");console.log(j),$.ajax({method:"GET",url:"/data/"+j}).done(function(e){$(".json-container .output-container").show(),$(".json-container .output-container i").show(),$("#hidden-output").text(JSON.stringify(e)),$(".output").text(JSON.stringify(e,null,4)),$("html, body").animate({scrollTop:$(".json-container").offset().top-90},1e3),t(!1,!1)}).fail(function(e){t(!0,!1),console.error("Unable to find "+j+". Error: "+JSON.stringify(e))}).always(function(){})}return!1}),$("input[type=radio][name=updateoptions]").change(function(e){var t=e.target.value;switch(t){case"calendar":$(".change-data").hide(),$(".update-description").text("Will send a REST call to the Google Calendar API.");break;case"newsletterdata":$(".change-data").hide(),$(".update-description").text("External call to newsletter page. Close new page when complete.");break;default:$(".update-description").text(""),$(".change-data").show()}}),document.getElementById("copy-text").addEventListener("click",function(){var t=e(document.getElementById("hidden-output"));$("html, body").animate({scrollTop:$(".json-container").offset().top-90},1);var o=t?"Successfully copied!":"Copy unsuccessful!",n=$(".copy-status");t?n.css({color:"green"}):n.css({color:"red"}),$(".copy-status").text(o).show(),setTimeout(function(){n.hide()},2e3)});var o="/data/officerList";t()});