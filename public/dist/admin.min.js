$(document).ready(function(){$(".submit-request").click(function(t){function e(t,e){return console.log("Request complete"),$(i).html(),t?$(i).text("Failure"):$(i).text("Success!"),setTimeout(function(){$(i).text("Submit")},2e3),e&&location.reload(),!1}function o(t){for(var e=document.getElementsByName(t),o=0;o<e.length;o++)if(e[o].checked)return e[o].value}var n=t&&t.target&&t.target.form&&t.target.form.children||null,a=$(this).attr("data-request"),i=this,l=[];if(n&&n.length>1){var s=$.map(n,function(t,e){if($(t).is(".form-check"))return[t]});s.filter(function(t){return!!$(t).find(".form-check-input").is(":checked")&&(l.push($(t).find(".form-check-input").val()),!0)})}var r=0;if(l.length>0&&"delete"==a&&($(this).html('<i class="fa fa-cog fa-spin fa-3x fa-fw"></i>'),l.forEach(function(t){$.ajax({method:"DELETE",url:"/data/"+t}).done(function(e){"OK"===e&&console.log(t+" was successfully cleared!")}).fail(function(e){console.error(t+" was unsuccessfully cleared."),console.error(e)}).always(function(){r++,r==l.length&&e(!1,!0)})})),"update"==a){$(this).html('<i class="fa fa-cog fa-spin fa-3x fa-fw"></i>');var c=o("updateoptions");if("newsletterdata"==c){var f=window.location.protocol+"//"+window.location.host+"/";return window.open(f+"update/newsletterload"),r++,console.info("Don't forget to move the newsletter* images to public/assets/newsletter"),void(r==l.length&&e(!1,!0))}var u,d=$("#data-update").val(),h=!1;try{var p=JSON.parse(d);u=typeof p}catch(m){h=!0}d=h&&"object"!==u?null:d,$.ajax({method:"PUT",url:"/data/"+c,dataType:"json",contentType:"application/json",data:d}).done(function(t){console.log(t),"OK"===t&&(e(!1,!1),console.log(c+" was successfully updated!"))}).fail(function(t){return 200===t.status?void e(!1,!1):(e(!0,!1),console.error(c+" was unsuccessfully updated."),void console.error(t))}).always(function(){})}if("view"==a){$(this).html('<i class="fa fa-cog fa-spin fa-3x fa-fw"></i>');var w=o("keyoptions");console.log(w),$.ajax({method:"GET",url:"/data/"+w}).done(function(t){$(".json-container div").show(),$(".output").text(JSON.stringify(t,null,4)),e(!1,!1)}).fail(function(t){e(!0,!1),console.error("Unable to find "+w+". Error: "+JSON.stringify(t))}).always(function(){$("html, body").animate({scrollTop:$(".json-container").offset().top-20},1e3)})}return!1})});