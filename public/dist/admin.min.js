"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};$(document).ready(function(){function e(e){var t="_hiddenCopyText_",o=document.createElement("textarea");o.style.position="absolute",o.style.left="-9999px",o.style.top="1200px",o.id=t,document.body.appendChild(o),o.textContent=e.textContent;var n=document.activeElement;o.focus(),o.setSelectionRange(0,o.value.length);var a;try{a=document.execCommand("copy")}catch(r){a=!1}return n&&"function"==typeof n.focus&&n.focus(),o.textContent="",a}function t(){$.ajax({method:"GET",url:o}).done(function(e){if("object"!=("undefined"==typeof e?"undefined":_typeof(e)))return void callback("GET method for "+o+" failed. Unsupported return type.");for(var t=0,n=e.length;t<n;t++)$("select").append('<option value="'+e[t].name+'">'+e[t].name+"</option>")}).fail(function(e){callback("GET method for "+o+" failed.")})}$(".submit-request").click(function(e){function t(e,t){return console.log("Request complete"),$(r).html(),e?$(r).text("Failure").css({background:"#D8000C"}):$(r).text("Success!").css({background:"green"}),setTimeout(function(){$(r).text("Submit").css({background:"#0137A2"})},2e3),t&&location.reload(),!1}function o(e){for(var t=document.getElementsByName(e),o=0;o<t.length;o++)if(t[o].checked)return t[o].value}var n=e&&e.target&&e.target.form&&e.target.form.children||null,a=$(this).attr("data-request"),r=this,c=[];if(console.log(n),n&&n.length>1){var s=$.map(n,function(e,t){if($(e).is(".form-check"))return[e]});s.filter(function(e){return!!$(e).find(".form-check-input").is(":checked")&&(c.push($(e).find(".form-check-input").val()),!0)})}var i=0;if(c.length>0&&"delete"==a&&($(this).html('<i class="fa fa-cog fa-spin fa-3x fa-fw"></i>'),c.forEach(function(e){$.ajax({method:"DELETE",url:"/data/"+e}).done(function(t){"OK"===t&&console.log(e+" was successfully cleared!")}).fail(function(t){console.error(e+" was unsuccessfully cleared."),console.error(t)}).always(function(){i++,i==c.length&&t(!1,!0)})})),"new-job"==a){var u=(new Date).getTime(),l=e.target.form.position.value,f=e.target.form.company.value,d=e.target.form.description.value,p=e.target.form.url.value,m=e.target.form.poster.value;return $(this).html('<i class="fa fa-cog fa-spin fa-3x fa-fw"></i>'),$.ajax({type:"POST",url:"/update/jobs",data:{position:l,company:f,description:d,url:p,poster:m,ts:u}}).done(function(e){t(!1,!1),console.log("Job was successfully posted!")}).fail(function(e){return 200===e.status?void t(!1,!1):(t(!0,!1),console.error("Job was not posted. :("),void console.error(e))}),!1}if("new-announcement"==a){var y=new Date,g=e.target.form.officer.value,h=e.target.form.announcement.value;return $(this).html('<i class="fa fa-cog fa-spin fa-3x fa-fw"></i>'),h=h.replace(/(?:\r\n|\r|\n)/g,"<br />"),$.ajax({type:"POST",url:"/update/announcements",data:{officer:g,timestamp:y,announcement:h}}).done(function(e){t(!1,!1),console.log("Announcement was successfully posted!")}).fail(function(e){return 200===e.status?void t(!1,!1):(t(!0,!1),console.error("Announcement was not posted. :("),void console.error(e))}),!1}if("googleForm"==a){var v=e.target.form.googleLink.value;return $(this).html('<i class="fa fa-cog fa-spin fa-3x fa-fw"></i>'),$.ajax({type:"PUT",url:"/update/survey",data:{link:v}}).done(function(e){t(!1,!1),console.log("Google survey link was successfully updated!")}).fail(function(e){return 200===e.status?void t(!1,!1):(t(!0,!1),console.error("Google survey could not be updated."),void console.error(e))}),!1}if("update"==a){$(this).html('<i class="fa fa-cog fa-spin fa-3x fa-fw"></i>');var x,b=o("updateoptions"),w=$("#data-update").val(),T=!1;try{var j=JSON.parse(w);x="undefined"==typeof j?"undefined":_typeof(j)}catch(k){T=!0}w=T&&"object"!==x?null:w,$.ajax({method:"PUT",url:"/data/"+b,dataType:"json",contentType:"application/json",data:w}).done(function(e){console.log(e),"OK"===e&&(t(!1,!1),console.log(b+" was successfully updated!"))}).fail(function(e){return 200===e.status?void t(!1,!1):(t(!0,!1),console.error(b+" was unsuccessfully updated."),void console.error(e))}).always(function(){})}if("view"==a){$(this).html('<i class="fa fa-cog fa-spin fa-3x fa-fw"></i>');var E=o("keyoptions");console.log(E),$.ajax({method:"GET",url:"/data/"+E}).done(function(e){$(".json-container .output-container").show(),$(".json-container .output-container i").show(),$("#hidden-output").text(JSON.stringify(e)),$(".output").text(JSON.stringify(e,null,4)),$("html, body").animate({scrollTop:$(".json-container").offset().top-90},1e3),t(!1,!1)}).fail(function(e){t(!0,!1),console.error("Unable to find "+E+". Error: "+JSON.stringify(e))}).always(function(){})}return!1}),$("input[type=radio][name=updateoptions]").change(function(e){var t=e.target.value;switch(t){case"calendar":$(".change-data").hide(),$(".update-description").text("Will send a REST call to the Google Calendar API.");break;default:$(".update-description").text(""),$(".change-data").show()}}),document.getElementById("copy-text").addEventListener("click",function(){var t=e(document.getElementById("hidden-output"));$("html, body").animate({scrollTop:$(".json-container").offset().top-90},1);var o=t?"Successfully copied!":"Copy unsuccessful!",n=$(".copy-status");t?n.css({color:"green"}):n.css({color:"red"}),$(".copy-status").text(o).show(),setTimeout(function(){n.hide()},2e3)});var o="/data/officerList";t()});